spring.application.name=demo
# ================= MySQL DataSource =================
# Ensure database 'spring_security_demo' already exists: CREATE DATABASE spring_security_demo CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
spring.datasource.url=jdbc:mysql://localhost:3306/spring_security_demo?allowPublicKeyRetrieval=true&useSSL=false&serverTimezone=UTC&characterEncoding=UTF-8&useUnicode=true&rewriteBatchedStatements=true
spring.datasource.username=root
spring.datasource.password=1
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Explicit Hibernate dialect (avoid metadata lookup while connection failing)
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false
spring.jpa.defer-datasource-initialization=true

# Disable automatic data seeding (DataInitializer) since users already exist in DB
app.data.initialize=false

# HikariCP tuning
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.pool-name=HikariPool
spring.datasource.hikari.connection-test-query=SELECT 1

# Disable H2 console in MySQL mode
spring.h2.console.enabled=false

# Logging to help diagnose connection problems
logging.level.com.zaxxer.hikari=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.orm.jdbc.bind=TRACE
logging.level.org.springframework.security=DEBUG

# Disable template & static resource caches for development so UI changes show immediately
spring.thymeleaf.cache=false
spring.web.resources.cache.period=0
spring.web.resources.chain.cache=false
spring.web.resources.chain.strategy.content.enabled=true
spring.web.resources.chain.strategy.content.paths=/**

# Show distinct 'username not found' vs 'wrong password' messages (dev only). Set to false in production.
security.login.show-username-errors=true
